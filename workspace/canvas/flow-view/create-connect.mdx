---
title: "Creating and Connecting Nodes"
description: "Build Flows by adding and wiring nodes together"
---

## Overview

Creating nodes and connecting them is the core of building Flows. This guide covers all the ways to add nodes and create connections between them.

## Creating nodes

### Method 1: Ask Triton

The easiest way to add nodes is through conversation.

**Examples:**
- _"Add a validation Action to this Flow"_
- _"Insert a sentiment analysis Agent after the input"_
- _"Add three Actions: fetch_data, process_data, and store_results"_

**Benefits:**
- Triton creates the node
- Suggests appropriate connections
- Configures basic settings
- Maintains Flow structure

### Method 2: Right-click menu

For manual control:

1. **Right-click** on empty Canvas space
2. Select **Add Node**
3. Choose node type:
   - **Action** — Select from your existing Actions or create new
   - **Agent** — Select from existing Agents or create new
   - **Flow** — Add a sub-Flow
   - **Control** — Router, Merge, Loop
4. Click to place on Canvas

### Method 3: Drag from Agent Toolbox

For visual workflows:

1. Open **Agent Toolbox** panel (right side)
2. Browse or search for component
3. **Drag** onto Canvas
4. **Drop** where you want it

**Tip:** Recently used components appear at the top for quick access.

### Method 4: Copy and paste

To duplicate existing nodes:

1. **Select** the node(s) you want to copy
2. **Copy:** `Cmd+C` (Mac) / `Ctrl+C` (Windows)
3. **Paste:** `Cmd+V` (Mac) / `Ctrl+V` (Windows)
4. The duplicate appears offset slightly

**Use case:** Creating parallel processing paths with identical Actions.

### Method 5: Quick add (keyboard)

For power users:

1. Press **`A`** (Add) or **`/`** (Command)
2. Type to search for component
3. Arrow keys to select
4. `Enter` to add to Canvas at current view center

## Connecting nodes

### Method 1: Click and drag

The standard way to create edges:

1. **Hover** over the source node's output port (right side)
2. **Click and hold** on the port
3. **Drag** toward the destination node
4. **Drop** on the destination's input port (left side)
5. Edge appears, connecting the nodes

**Visual feedback:**
- Compatible ports **highlight green** when hovering
- Incompatible ports **highlight red**
- Edge follows cursor while dragging

### Method 2: Select and connect

For precision connections:

1. **Select** the source node
2. **Right-click** → **Connect to...**
3. Choose the destination node from list
4. Select which output port → which input port
5. Click **Connect**

**Use case:** When Canvas is zoomed out or nodes are far apart.

### Method 3: Ask Triton

Let AI handle connections:

**Examples:**
- _"Connect validate_input to process_data"_
- _"Wire the output of fetch_user to the input of notify_user"_
- _"Connect all three fetch Actions to the merge node"_

**Benefits:**
- Automatic port mapping
- Handles type conversions if needed
- Maintains data flow logic

### Method 4: Auto-connect

When adding a node between existing ones:

1. **Drag** a new node onto an existing edge
2. **Drop** it on the edge line
3. The edge automatically splits and connects through the new node

**Result:**
```
Before: A → C
After:  A → B → C (B is the new node)
```

## Connection validation

Triform validates connections to prevent errors.

### Compatible connections

Connections work when:
- **Type match:** Output type equals input type
- **Schema compatible:** Fields align (or can be mapped)
- **No cycles:** Would not create an infinite loop (unless intentional)

### Incompatible connections

Connections fail when:
- **Type mismatch:** String output → Number input
- **Missing required fields:** Output lacks required input fields
- **Cycle detected:** Would create unintended loop

**What happens:**
- Port highlights **red** when hovering
- Cannot drop to create connection
- Error message explains why

### Type conversion

Sometimes Triton can add automatic conversion:

**Example:**
- Source outputs: `{ "value": 123 }`
- Destination expects: `{ "value": "string" }`
- Triton offers to add a type conversion step

## Mapping fields

When schemas don't match exactly, you need field mapping.

### Automatic mapping

Triton maps fields automatically when names match:

**Source output:**
```json
{
  "user_id": "123",
  "user_name": "Alice"
}
```

**Destination input:**
```json
{
  "user_id": "string",
  "name": "string"
}
```

**Triton maps:**
- `user_id` → `user_id` ✓ (exact match)
- `user_name` → `name` (no match, needs manual mapping)

### Manual mapping

When auto-mapping isn't enough:

1. **Click** the edge
2. Properties Panel shows **Field Mapping**
3. Map each destination field:
   - Select source field from dropdown
   - Or write a transformation expression
4. Click **Save**

**Example transformations:**
- `user_name` → `name` (simple rename)
- `first_name + " " + last_name` → `full_name` (combine fields)
- `price * 1.1` → `price_with_tax` (calculation)

## Disconnecting nodes

### Remove a single connection

1. **Click** the edge to select it
2. **Delete:** Press `Delete` or `Backspace`
3. Or **right-click** edge → **Delete**

### Remove all connections from a node

1. **Select** the node
2. **Right-click** → **Disconnect All**
3. Confirm

**Use case:** Quickly removing a node without deleting it.

### Remove node and reconnect

To remove a node but keep the Flow intact:

1. **Select** the node
2. **Right-click** → **Delete and Bridge**
3. The node is removed and edges reconnect around it

**Example:**
```
Before: A → B → C
After:  A → C (B deleted, A now connects directly to C)
```

## Advanced connection techniques

### Conditional connections

Create edges that activate based on conditions:

1. Connect nodes normally
2. **Click** the edge
3. Properties Panel → **Add Condition**
4. Define condition: `status == "approved"`
5. Edge now labeled with condition

**Use case:** Routing different data through different paths.

### Named output ports

Some nodes have multiple output ports:

**Example:**
```
Process Node
├── success (output port)
├── error (output port)
└── warning (output port)
```

Connect each port to appropriate downstream nodes:
- `success` → Continue normal flow
- `error` → Error handling
- `warning` → Log and continue

### Multiple inputs

Some nodes accept multiple inputs:

**Merge node:**
```
Source A ↘
Source B → Merge → Destination
Source C ↗
```

The Merge node combines all inputs before passing to destination.

**Configuration:**
- **Wait for all:** Waits for A, B, and C before proceeding
- **First wins:** Proceeds as soon as any input arrives
- **Custom logic:** Combine inputs with a function

## Connection best practices

> **Connect left to right** — Makes flow easy to follow

> **Avoid crossing edges** — Rearrange nodes to minimize crossings

> **Use named ports** — Clarifies purpose of each connection

> **Validate schemas** — Ensure type compatibility before connecting

> **Test connections** — Run executions to verify data flows correctly

## Common connection patterns

### Pattern 1: Linear connection

```
A → B → C → D
```

Simple, sequential processing.

### Pattern 2: Fan-out

```
A → B ↘
      C
  → D ↗
```

One source, multiple destinations (broadcast).

### Pattern 3: Fan-in

```
A ↘
B → D
C ↗
```

Multiple sources, one destination (merge).

### Pattern 4: Error handling

```
A → [success] → B
  → [error] → Error Handler
```

Different paths for success and failure.

### Pattern 5: Loop

```
Input → Process → [not done] → Process (loop back)
                → [done] → Output
```

Iteration over items or until condition met.

## Troubleshooting connections

### Problem: Can't connect two nodes

**Possible causes:**
- Type mismatch between ports
- Schema incompatibility
- Would create invalid cycle

**Solutions:**
- Check output/input types (hover over ports)
- Add transformation node between them
- Ask Triton: _"Why can't I connect A to B?"_

### Problem: Connection exists but data doesn't flow

**Possible causes:**
- Condition on edge isn't met
- Upstream node failed
- Field mapping incorrect

**Solutions:**
- Check execution trace
- Verify edge condition
- Review field mapping

### Problem: Too many crossing edges

**Solution:**
- Rearrange nodes to reduce crossings
- Use auto-layout: Right-click → Auto Layout
- Split into sub-Flows

## Next steps

- [Understanding I/O Nodes](/workspace/canvas/flow-view/io-nodes)
- [Node Interactions](/workspace/canvas/flow-view/node-interactions)
- [Flow View Basics](/workspace/canvas/flow-view/basics)
- [Building Flows with Triton](/triton/building)
